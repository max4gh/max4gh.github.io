---
layout: post
title:  "Nginx学习笔记"
date:   2017-3-30 09:37:25 +0800
categories: nginx
---
### 1. Nginx 服务器的 Web 请求处理机制
#### 1.1. 基本概念
##### 1.1.1. 多进程方式
多进程是指，服务器每当接收到一个客户端时，就由服务器主进程生成一个子进程出来和该客户端建立连接进行交互，直到连接断开，该子进程就结束了。优点是简单，缺点是消耗资源比较多，对系统造成压力，导致性能下载，并发能力有限。Apache 就是采用这种方式，但用“预生成进程”改进了子进程的生成方式。
##### 1.1.2. 多线程方式
多线是指，服务器每当接收到一个客户端时，会由服务器主进程派生一个线和出来和该客户端进行交互。优点是开销比较小，使用线程进行任务调试，开发方面可以遵循一定的标准，利于规范和协作。缺点是进行间共享内存空间，互相影响，增加了出错的风险。IIS 使用了该方式，需要定期检查和重启，以防故障发生。
##### 1.1.3. 异步方式
- 同步和异步是描述通信模式的概念。同步机制是指发送方发送请求后，需要等待接收到接收方的响应后，才接着发送下一个请求；异步是发送方发送出一个请求后，不等待接收方响应，就继续发送下个请求。
- 阻塞和非阻塞用来描述进程处理调用的方式，Socket 的实质上就是 IO 的操作。

组合方式有以下四种（想像超市收款的例子）：
- 同步阻塞：比较简单，但是效率不高。
- 同步不阻塞：一般不用
- 异步阻塞：一般不用
- 异步不阻塞：效率最高，Nginx使用的方式。







